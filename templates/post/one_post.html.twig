{% extends "base.html.twig" %}
{% block body %}
	{% for message in app.flashes('error') %}
		<div class="container alert alert-danger mt-2">
			{{ message }}
		</div>
	{% endfor %}
	<main>
		{# POST CONTENT #}
		<div class="container mb-5 mt-3">
			<h1 class='text-center'>
				{{ post.title | upper}}
			</h1>
			<h2 class='text-center'>
				{{post.introduction }}
			</h2>

			<p class='mt-5 text-justify' style='font-size: 1.5rem;'>
				{{ post.content }}
			</p>
		</div>

		{# COMMENTS SECTIONS #}
		<div class="comments_section container rounded pt-3 pb-2" style='background: #AEB4E7'>
			<h4 class='text-light mb-3'>Comments</h4>
			{% if app.user %}
				<form method="POST" class=''>
					<textarea name="content" id="" rows="5" class='form-control mb-3 bg-light' placeholder="Write your comment here..."></textarea>
					<button type='submit' class='btn btn-dark'>
						Post comment
					</button>
				</form>
			{% endif %}

			<div class="mt-3">
				{# COMMENTS LOOP #}
				{% for comment in post.comments | sort((a, b) => b.createdAt <=> a.createdAt  )%}
					{# ------------------------------ Sorting for LATEST  #}
					{#-----------------^ ^ ^ ^ ^ ^ ^ #}
					<div class='comment-card text-white w-100 rounded p-3 mb-3' style='background: #9AA0D1'> 
						<h5>
							{{ random('🐶🐱🐭🐹🐰🦊🐻🐼🦁🦄🐴🐺🐛') }}
							{{ comment.user.getName | upper}}
							-
							<span class='h6'>
								{{ comment.createdAt | ago}}
							</span>
						</h5>
						<h6 class='bg-light text-dark p-2 rounded'>
							{{ comment.content }}
						</h6>
					</div>
				{% endfor %}
			</div>
		</div>
	</main>
{% endblock %}
